const API={base:[{id:"p1",date:"28.02.2023",title:"Р1 Объем НИОКР в расчете на одного научно-педагогического работника",plan:"421320.00 ",fact:"33967.00",unit:"rub"},{id:"p2",date:"28.02.2023",title:"Р2 Доля работников в возрасте до 39 лет в общей численности профессорско-преподавательского состава",plan:"23.16",fact:"33.17",unit:"ratio"},{id:"p3",date:"28.02.2023",title:"Р3 Доля обучающихся по образовательным программам бакалавриата, специалитета, магистратуры по очной форме обучения получивших на бесплатной основе дополнительную квалификацию, в общей численности обучающихся по образовательным программам бакалавриата, специалитета, магистратуры по очной форме обучения ",plan:"13.5",fact:"0",unit:"ratio"},{id:"p4",date:"28.02.2023",title:"Р4 Доходы университета из средств от приносящей доход деятельности в расчете на одного НПР",plan:"5138530.00",fact:"1554279.00",unit:"rub"},{id:"p5",date:"28.02.2023",title:"Р5 Количество обучающихся по программам ДПО на «цифровой кафедре» образовательной организации высшего образования",plan:"1111",fact:"1427",annualStatistics:[800,1050,1110,1130,1200,1190,1300,1200,1400],unit:"people"},{id:"p6",date:"28.02.2023",title:"Р6 Объем затрат на научные исследования и разработки из собственных средств университета в расчете на одного НПР",plan:"675652.00",fact:"59271.00",unit:"rub"}],special:[{id:"p1",date:"28.02.2023",title:"Р1 (С1) Количество индексируемых в базе данных Web of Science Core Collection публикаций за последние три полных года, в расчете на одного НПР",plan:"0.116",fact:"0.167",unit:"item"},{id:"p2",date:"28.02.2023",title:"Р2 (С1) Количество индексируемых в базе данных Scopus публикаций типов «Article», «Review» за последние три полных года, в расчете на одного НПР",plan:"0.475",fact:"0.503",unit:"item"},{id:"p3",date:"28.02.2023",title:"Р3 (С1) Объем доходов от реализации дополнительных профессиональных программ и основных программ профессионального обучения в расчете на одного НПР",plan:"273935.00",fact:"347036.00",unit:"rub"},{id:"p4",date:"28.02.2023",title:"Р4 (С1) Объем средств, поступивших от выполнения научно-исследовательских и опытно-конструкторских работ и оказания научно-технических услуг по договорам с организациями реального сектора экономики и за счет средств бюджета субъекта РФ и местных бюджетов, в расчете на одного НПР",plan:"231652.00",fact:"156714.00",unit:"rub"},{id:"p5",date:"28.02.2023",title:"Р5 (С1) Доля обучающихся по образовательным программам высшего образования по договорам о целевом обучении в общей численности обучающихся",plan:"1.558",fact:"1.331",unit:"ratio"},{id:"p6",date:"28.02.2023",title:"Р6 (С1) Отношение численности обучающихся, принятых в отчетном году на обучение по образовательным программам бакалавриата, специалитета, магистратуры, получивших предыдущее образование (высшее, среднее профессиональное или среднее (полное) общее образование), являющееся основанием для получения образования в университете, в образовательных организациях, расположенных на территории г. Москвы и г. Санкт-Петербурга",plan:"64.454",fact:"57.849",unit:"ratio"},{id:"p7",date:"28.02.2023",title:"Р7 (С1) Отношение численности иностранных граждан и лиц без гражданства, обучающихся по программам бакалавриата, специалитета, магистратуры, программам подготовки научно-педагогических кадров в аспирантуре, программам ординатуры, программам ассистентуры-стажировки по очной форме обучения, к численности обучающихся по программам бакалавриата, специалитета, магистратуры, программам подготовки научно-педагогических кадров в аспирантуре, программам ординатуры, программам ассистентуры-стажировки по очной форме обучения",plan:"9.103",fact:"9.706",unit:"ratio"},{id:"p8",date:"28.02.2023",title:"Р8 (С1) Объем доходов от результатов интеллектуальной деятельности, права на использование которых были переданы по лицензионному договору (соглашению), договору об отчуждении исключительного права, в расчете на одного НПР",plan:"0.711",fact:"0",unit:"rub"}]},DIAGRAM_MAX_VAL=API.base[4].max_value||2e3,tabs=document.querySelectorAll(".priority__tab"),tabcontent=document.querySelectorAll(".priority__tabcontent");tabs.forEach((t,a)=>{t.addEventListener("click",()=>{tabcontent.forEach(t=>t.classList.remove("show")),tabcontent.forEach(t=>t.classList.add("hide")),tabcontent[a].classList.add("show"),tabs.forEach(t=>{t.querySelector("svg").querySelector("path").setAttribute("stroke","rgba(33, 122, 255, 0.2)"),t.classList.remove("priority__tab_active")}),t.querySelector("svg").querySelector("path").setAttribute("stroke","#217AFF"),t.classList.add("priority__tab_active")})});const addSpases=t=>{let a,i=t.toString();if(-1!==i.indexOf(".")){i=t.toString().split(".");const n=i[0],e=i[1];a=n.length<=3?n:n.replace(/(\d)(?=(\d{3})+$)/g,"$1 "),a+="."+e}else a=i.length<=3?i:i.replace(/(\d)(?=(\d{3})+$)/g,"$1 ");return a},setUnit=t=>{let a;switch(t){case"people":a=" чел.";break;case"rub":a=" руб.";break;case"item":a=" ед.";break;case"ratio":a="%"}return a},setMonthsLine=(t,a)=>[...t.slice(a-1,t.length),...t.slice(0,a-1)],diagramMounths=["Сен","Окт","Ноя","Дек","Янв","Фев","Мар","Апр","Май"],diagramOptions={events:[],aspectRatio:4,scales:{x:{ticks:{color:"#FFFFFF"},grid:{display:!1,borderColor:"#FFFFFF"},border:{color:"#FFFFFF"}},y:{stacked:!0,min:0,max:DIAGRAM_MAX_VAL,ticks:{stepSize:DIAGRAM_MAX_VAL,color:"#FFFFFF",callback:function(t){return""}},grid:{display:!1,borderColor:"#FFFFFF"},border:{color:"#FFFFFF"}}},plugins:{legend:{display:!1}}};function createChart(t,a,i,n){const e={type:"line",data:{labels:setMonthsLine(n,a.currentMonth),datasets:[{backgroundColor:"#217AFF",borderColor:"#217AFF",data:a.annualStatistics}]},options:i},l=document.querySelector("."+t).getContext("2d");new Chart(l,e)}function showChart(t,a,i){const n=i.find(t=>t.id==a);t.querySelector(".diagram-box").innerHTML=`<canvas class="line-chart-${a}"></canvas>`,createChart("line-chart-"+a,n,diagramOptions,diagramMounths)}Chart.defaults.font.size=12;const rectIcon=()=>'\n  <svg width=".8vw" height=".8vw" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect x="4.52548" y="15.5" width="14.9333" height="14.9333" transform="rotate(-45 4.52548 15.5)"\n    stroke="#FB9B2B" stroke-width="6.4" />\n  </svg>\n  ',progressbar=t=>`\n  <svg class="priority__item-progressbar" viewBox="0 0 1054 60" fill="none"\n    xmlns="http://www.w3.org/2000/svg">\n    <rect opacity="0.05" x="-2" width="100%" height="100%" fill="white"></rect>\n    <rect y="1" width="${t}%" height="100%" fill="url(#p1-m-1)"></rect>\n    <path d="M15.3077 1H20.1543L-24.2247 60H-29.0713L15.3077 1Z" fill="#112054"></path>\n    <path d="M1042.03 60L1086.41 1H1081.56L1037.18 60H1042.03Z" fill="#112054"></path>\n    <path d="M1022.64 60L1067.02 1H1062.18L1017.8 60H1022.64Z" fill="#112054"></path>\n    <path d="M1003.26 60L1047.64 1H1042.79L998.411 60H1003.26Z" fill="#112054"></path>\n    <path d="M983.872 60L1028.25 1H1023.4L979.025 60H983.872Z" fill="#112054"></path>\n    <path d="M964.484 60L1008.86 1H1004.02L959.638 60H964.484Z" fill="#112054"></path>\n    <path d="M945.098 60L989.477 1H984.63L940.251 60H945.098Z" fill="#112054"></path>\n    <path d="M925.712 60L970.091 1H965.245L920.866 60H925.712Z" fill="#112054"></path>\n    <path d="M906.326 60L950.705 1H945.858L901.479 60H906.326Z" fill="#112054"></path>\n    <path d="M886.939 60L931.318 1H926.472L882.093 60H886.939Z" fill="#112054"></path>\n    <path d="M867.552 60L911.931 1H907.085L862.706 60H867.552Z" fill="#112054"></path>\n    <path d="M848.165 60L892.544 1H887.697L843.318 60H848.165Z" fill="#112054"></path>\n    <path d="M828.779 60L873.158 1H868.311L823.932 60H828.779Z" fill="#112054"></path>\n    <path d="M809.392 60L853.771 1H848.924L804.545 60H809.392Z" fill="#112054"></path>\n    <path d="M790.006 60L834.385 1H829.539L785.16 60H790.006Z" fill="#112054"></path>\n    <path d="M770.619 60L814.998 1H810.151L765.772 60H770.619Z" fill="#112054"></path>\n    <path d="M751.233 60L795.612 1H790.766L746.387 60H751.233Z" fill="#112054"></path>\n    <path d="M731.848 60L776.227 1H771.38L727.001 60H731.848Z" fill="#112054"></path>\n    <path d="M712.461 60L756.84 1H751.994L707.615 60H712.461Z" fill="#112054"></path>\n    <path d="M693.075 60L737.454 1H732.607L688.228 60H693.075Z" fill="#112054"></path>\n    <path d="M673.687 60L718.066 1H713.22L668.841 60H673.687Z" fill="#112054"></path>\n    <path d="M654.302 60L698.681 1H693.834L649.455 60H654.302Z" fill="#112054"></path>\n    <path d="M634.915 60L679.294 1H674.447L630.068 60H634.915Z" fill="#112054"></path>\n    <path d="M615.528 60L659.907 1H655.06L610.681 60H615.528Z" fill="#112054"></path>\n    <path d="M596.141 60L640.52 1H635.673L591.294 60H596.141Z" fill="#112054"></path>\n    <path d="M576.754 60L621.133 1H616.287L571.908 60H576.754Z" fill="#112054"></path>\n    <path d="M557.369 60L601.748 1H596.901L552.522 60H557.369Z" fill="#112054"></path>\n    <path d="M537.983 60L582.362 1H577.515L533.136 60H537.983Z" fill="#112054"></path>\n    <path d="M518.597 60L562.976 1H558.129L513.75 60H518.597Z" fill="#112054"></path>\n    <path d="M499.209 60L543.588 1H538.742L494.363 60H499.209Z" fill="#112054"></path>\n    <path d="M479.823 60L524.202 1H519.356L474.977 60H479.823Z" fill="#112054"></path>\n    <path d="M460.437 60L504.816 1H499.969L455.59 60H460.437Z" fill="#112054"></path>\n    <path d="M441.051 60L485.43 1H480.583L436.204 60H441.051Z" fill="#112054"></path>\n    <path d="M421.663 60L466.042 1H461.195L416.816 60H421.663Z" fill="#112054"></path>\n    <path d="M402.276 60L446.655 1H441.809L397.43 60H402.276Z" fill="#112054"></path>\n    <path d="M382.891 60L427.27 1H422.423L378.044 60H382.891Z" fill="#112054"></path>\n    <path d="M363.504 60L407.883 1H403.037L358.658 60H363.504Z" fill="#112054"></path>\n    <path d="M344.118 60L388.497 1H383.651L339.271 60H344.118Z" fill="#112054"></path>\n    <path d="M324.732 60L369.111 1H364.264L319.885 60H324.732Z" fill="#112054"></path>\n    <path d="M305.345 60L349.724 1H344.877L300.498 60H305.345Z" fill="#112054"></path>\n    <path d="M285.958 60L330.337 1H325.491L281.112 60H285.958Z" fill="#112054"></path>\n    <path d="M266.572 60L310.951 1H306.105L261.726 60H266.572Z" fill="#112054"></path>\n    <path d="M247.185 60L291.565 1H286.718L242.339 60H247.185Z" fill="#112054"></path>\n    <path d="M227.799 60L272.178 1H267.332L222.953 60H227.799Z" fill="#112054"></path>\n    <path d="M208.412 60L252.791 1H247.944L203.565 60H208.412Z" fill="#112054"></path>\n    <path d="M189.026 60L233.405 1H228.559L184.18 60H189.026Z" fill="#112054"></path>\n    <path d="M169.64 60L214.019 1H209.172L164.793 60H169.64Z" fill="#112054"></path>\n    <path d="M150.252 60L194.631 1H189.785L145.406 60H150.252Z" fill="#112054"></path>\n    <path d="M130.867 60L175.246 1H170.399L126.02 60H130.867Z" fill="#112054"></path>\n    <path d="M111.48 60L155.859 1H151.012L106.633 60H111.48Z" fill="#112054"></path>\n    <path d="M92.0942 60L136.473 1H131.627L87.2476 60H92.0942Z" fill="#112054"></path>\n    <path d="M72.7079 60L117.087 1H112.24L67.8613 60H72.7079Z" fill="#112054"></path>\n    <path d="M53.3202 60L97.6993 1H92.8527L48.4736 60H53.3202Z" fill="#112054"></path>\n    <path d="M33.9345 60L78.3135 1H73.4669L29.0879 60H33.9345Z" fill="#112054"></path>\n    <path d="M14.5493 60L58.9283 1H54.0817L9.70264 60H14.5493Z" fill="#112054"></path>\n    <path d="M-4.83796 60L39.5411 1H34.6945L-9.68457 60H-4.83796Z" fill="#112054"></path>\n    <svg>\n      <defs>\n        <linearGradient id="p1-m-1" x1="1054" y1="1" x2="0" y2="1" gradientUnits="userSpaceOnUse">\n          <stop stop-color="#4CD380"></stop>\n          <stop offset="1" stop-color="#217AFF"></stop>\n        </linearGradient>\n      </defs>\n    </svg>\n  </svg>\n  `,templateData=({id:t,plan:a,fact:i,unit:n},e,l)=>"p2"!=t&&"p3"!=t||"special"==l?"p5"==t&&"charted"==l?`\n    <div class="priority__item-data">\n      <div class="priority__item-data__wrap">\n        <div class="priority__item-fact">\n          <span>Факт</span>\n          <div>${i}</div>\n          <span>${setUnit(n)}</span>\n        </div>\n        <div class="priority__item-plan">\n          <span>Плановое значение</span>\n          <div>${a}</div>\n          <span>${setUnit(n)}</span>\n        </div>\n      </div>\n      <div class="diagram-wrap"> \n        <div class="diagram-box"></div>\n        <div class="planned-box">\n          <div style="height:${a/DIAGRAM_MAX_VAL*100}%;" class="planned-line"></div>\n        </div>\n      </div>\n    </div>\n    `:`\n  <div class="priority__item-data">\n    <div class="priority__item-data__wrap">\n      <div class="priority__item-fact">\n        <span>Факт</span>\n        <div>${addSpases(i)}${setUnit(n)}</div>\n      </div>\n      <div class="priority__item-plan">\n        <span>План</span>\n        <div>${addSpases(a)}${setUnit(n)}</div>\n      </div>\n    </div>\n    ${progressbar(e)}\n  </div>\n  `:`\n    <div class="priority__item-data">\n      <div class="priority__item-data__wrap">\n        <div class="priority__item-fact">\n          <div>${i}${setUnit(n)}</div>\n        </div>\n        <div style="left:${(+a+2).toString()}%;" class="priority__item-plan">\n          <div>${a}${setUnit(n)}</div>\n        </div>\n      </div>\n      ${progressbar(i)}\n      <div class="priority__item-data__wrap">\n        <div class="priority__item-fact">\n          <span>Факт</span>\n        </div>\n        <div style="left:${(+a+2).toString()}%;" class="priority__item-plan">\n          <span>Плановое значение</span>\n        </div>\n      </div>\n      <div style="left:${a}%;" class="planned-line"></div>\n    </div>\n    `,template=(t,a="default",i=1)=>{const{date:n,title:e,plan:l,fact:p}=t;let d=p;return"planned"!=a&&0!=p&&(d=(p/l*100).toFixed(i)),`\n  <div class="priority__item priority__item_${a}">\n    <div class="priority__item-date">Фактические значения на ${n} г.</div>\n    <div class="priority__item-info">\n      <div class="priority__item-title">${e}</div>\n      <div class="priority__item-value">\n        <div>${d}</div>\n        <span>%</span>\n      </div>\n      ${templateData(t,d,a)}\n    </div>\n  </div>\n  `};function setItems(){let t=[],a="",i="";API.base.forEach(i=>{const{id:n,annualStatistics:e}=i;if("p2"!=n&&"p3"!=n)return"p5"==n?(t.push({id:n,annualStatistics:e}),void(a+=template(i,"charted"))):void(a+=template(i));a+=template(i,"planned")}),API.special.forEach(t=>i+=template(t,"special")),document.querySelector("#base.priority__items").innerHTML=a,document.querySelector("#special.priority__items").innerHTML=i;showChart(document.querySelector("#base .priority__item_charted"),"p5",t)}setItems();