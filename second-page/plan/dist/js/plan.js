const planData=[{id:1,name:"Высшая школа Экономики и бизнеса",color:"#217AFF",fact:1299.99,plan:1999999.99,isIcrease:!0,currentMonth:8,annualStatistics:[10,20,40,35,16,25,50,55,40,45,20,80],items:[{id:11,name:"Кафедра маркетинга (в т.ч. научно-исследовательская лаборатория «Маркетинговые исследования транспортного комплекса»)",fact:110,plan:1e8,isIncrease:!1,currentMonth:8,annualStatistics:[10,20,40,35,160,25,50,55,40,45,20,80]},{id:12,name:"Кафедра маркетинга (в т.ч. научно-исследовательская лаборатория «Маркетинговые исследования транспортного комплекса»)",fact:90,plan:15e3,isIncrease:!0,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,20,10]},{id:13,name:"Кафедра маркетинга (в т.ч. научно-исследовательская лаборатория «Маркетинговые исследования транспортного комплекса»)",fact:20,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,5,0,0,10,15,20,35,40,55,60,70]},{id:14,name:"Кафедра маркетинга (в т.ч. научно-исследовательская лаборатория «Маркетинговые исследования транспортного комплекса»)",fact:70,plan:2e3,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]}]},{id:2,name:"Высшая школа Финансов",color:"#EF8E8E",fact:30,plan:15e3,isIcrease:!1,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,20,10],items:[{id:21,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]}]},{id:3,name:"Высшая школа Менеджмента",color:"#2BD6FB",fact:20,plan:1e3,isIcrease:!1,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0],items:[{id:31,name:"Базовая кафедра «Экономические и правовые экспертизы» Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:32,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:33,name:"Базовая кафедра",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:34,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:35,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:36,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:37,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:38,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:39,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:40,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:41,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:42,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:43,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:44,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:45,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]},{id:46,name:"Базовая кафедра «Экономические и правовые экспертизы»",fact:130,plan:1e4,isIncrease:!0,currentMonth:8,annualStatistics:[1,2,40,35,26,55,57,95,30,25,10,0]}]},{id:4,name:"Высшая школа кибертехнологий, математики и статики",color:"#627DAE",fact:130,plan:2e4,isIcrease:!0,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,80,90],items:[]},{id:5,name:"Высшая инженерная школа «Новые материалы и технологии»",color:"#4CD382",fact:69,plan:15e3,isIcrease:!0,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,20,10]},{id:6,name:"Высшая школа Социально – гуманитарных наук",color:"#6C38FF",items:[],fact:13,plan:15e3,isIcrease:!1,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,20,10]},{id:8,name:"Высшая школа права",color:"#FB9B2B",fact:80,plan:19e3,isIcrease:!0,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,20,10],items:[]},{id:9,name:"НИО",color:"#FBE62B",fact:89,plan:4e3,isIcrease:!0,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,20,10],items:[]},{id:10,name:"Прочие подразделения",color:"#A7EB17",fact:9,plan:7e3,isIcrease:!1,currentMonth:8,annualStatistics:[10,30,20,35,96,85,88,55,40,43,20,10],items:[]}];let TitleModule={setTitle:function(t){document.querySelector(".plan__header-title").textContent=t},setSubtitle:function(t){document.querySelector(".plan__header-subtitle span").textContent=t}},ProgressBarModule={setProgressbar:function(t,e,n,a){return`\n        <svg class="plan__progressbar plan__progressbar_${a}" viewBox="0 0 1054 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <rect opacity="0.05" x="-2" width="100%" height="100%" fill="white"/>\n            <rect y="1" width="${e}%" height="100%" fill="url(#${t})"/>\n            <path d="M15.3077 1H20.1543L-24.2247 60H-29.0713L15.3077 1Z" fill="#112054"/>\n            <path d="M1042.03 60L1086.41 1H1081.56L1037.18 60H1042.03Z" fill="#112054"/>\n            <path d="M1022.64 60L1067.02 1H1062.18L1017.8 60H1022.64Z" fill="#112054"/>\n            <path d="M1003.26 60L1047.64 1H1042.79L998.411 60H1003.26Z" fill="#112054"/>\n            <path d="M983.872 60L1028.25 1H1023.4L979.025 60H983.872Z" fill="#112054"/>\n            <path d="M964.484 60L1008.86 1H1004.02L959.638 60H964.484Z" fill="#112054"/>\n            <path d="M945.098 60L989.477 1H984.63L940.251 60H945.098Z" fill="#112054"/>\n            <path d="M925.712 60L970.091 1H965.245L920.866 60H925.712Z" fill="#112054"/>\n            <path d="M906.326 60L950.705 1H945.858L901.479 60H906.326Z" fill="#112054"/>\n            <path d="M886.939 60L931.318 1H926.472L882.093 60H886.939Z" fill="#112054"/>\n            <path d="M867.552 60L911.931 1H907.085L862.706 60H867.552Z" fill="#112054"/>\n            <path d="M848.165 60L892.544 1H887.697L843.318 60H848.165Z" fill="#112054"/>\n            <path d="M828.779 60L873.158 1H868.311L823.932 60H828.779Z" fill="#112054"/>\n            <path d="M809.392 60L853.771 1H848.924L804.545 60H809.392Z" fill="#112054"/>\n            <path d="M790.006 60L834.385 1H829.539L785.16 60H790.006Z" fill="#112054"/>\n            <path d="M770.619 60L814.998 1H810.151L765.772 60H770.619Z" fill="#112054"/>\n            <path d="M751.233 60L795.612 1H790.766L746.387 60H751.233Z" fill="#112054"/>\n            <path d="M731.848 60L776.227 1H771.38L727.001 60H731.848Z" fill="#112054"/>\n            <path d="M712.461 60L756.84 1H751.994L707.615 60H712.461Z" fill="#112054"/>\n            <path d="M693.075 60L737.454 1H732.607L688.228 60H693.075Z" fill="#112054"/>\n            <path d="M673.687 60L718.066 1H713.22L668.841 60H673.687Z" fill="#112054"/>\n            <path d="M654.302 60L698.681 1H693.834L649.455 60H654.302Z" fill="#112054"/>\n            <path d="M634.915 60L679.294 1H674.447L630.068 60H634.915Z" fill="#112054"/>\n            <path d="M615.528 60L659.907 1H655.06L610.681 60H615.528Z" fill="#112054"/>\n            <path d="M596.141 60L640.52 1H635.673L591.294 60H596.141Z" fill="#112054"/>\n            <path d="M576.754 60L621.133 1H616.287L571.908 60H576.754Z" fill="#112054"/>\n            <path d="M557.369 60L601.748 1H596.901L552.522 60H557.369Z" fill="#112054"/>\n            <path d="M537.983 60L582.362 1H577.515L533.136 60H537.983Z" fill="#112054"/>\n            <path d="M518.597 60L562.976 1H558.129L513.75 60H518.597Z" fill="#112054"/>\n            <path d="M499.209 60L543.588 1H538.742L494.363 60H499.209Z" fill="#112054"/>\n            <path d="M479.823 60L524.202 1H519.356L474.977 60H479.823Z" fill="#112054"/>\n            <path d="M460.437 60L504.816 1H499.969L455.59 60H460.437Z" fill="#112054"/>\n            <path d="M441.051 60L485.43 1H480.583L436.204 60H441.051Z" fill="#112054"/>\n            <path d="M421.663 60L466.042 1H461.195L416.816 60H421.663Z" fill="#112054"/>\n            <path d="M402.276 60L446.655 1H441.809L397.43 60H402.276Z" fill="#112054"/>\n            <path d="M382.891 60L427.27 1H422.423L378.044 60H382.891Z" fill="#112054"/>\n            <path d="M363.504 60L407.883 1H403.037L358.658 60H363.504Z" fill="#112054"/>\n            <path d="M344.118 60L388.497 1H383.651L339.271 60H344.118Z" fill="#112054"/>\n            <path d="M324.732 60L369.111 1H364.264L319.885 60H324.732Z" fill="#112054"/>\n            <path d="M305.345 60L349.724 1H344.877L300.498 60H305.345Z" fill="#112054"/>\n            <path d="M285.958 60L330.337 1H325.491L281.112 60H285.958Z" fill="#112054"/>\n            <path d="M266.572 60L310.951 1H306.105L261.726 60H266.572Z" fill="#112054"/>\n            <path d="M247.185 60L291.565 1H286.718L242.339 60H247.185Z" fill="#112054"/>\n            <path d="M227.799 60L272.178 1H267.332L222.953 60H227.799Z" fill="#112054"/>\n            <path d="M208.412 60L252.791 1H247.944L203.565 60H208.412Z" fill="#112054"/>\n            <path d="M189.026 60L233.405 1H228.559L184.18 60H189.026Z" fill="#112054"/>\n            <path d="M169.64 60L214.019 1H209.172L164.793 60H169.64Z" fill="#112054"/>\n            <path d="M150.252 60L194.631 1H189.785L145.406 60H150.252Z" fill="#112054"/>\n            <path d="M130.867 60L175.246 1H170.399L126.02 60H130.867Z" fill="#112054"/>\n            <path d="M111.48 60L155.859 1H151.012L106.633 60H111.48Z" fill="#112054"/>\n            <path d="M92.0942 60L136.473 1H131.627L87.2476 60H92.0942Z" fill="#112054"/>\n            <path d="M72.7079 60L117.087 1H112.24L67.8613 60H72.7079Z" fill="#112054"/>\n            <path d="M53.3202 60L97.6993 1H92.8527L48.4736 60H53.3202Z" fill="#112054"/>\n            <path d="M33.9345 60L78.3135 1H73.4669L29.0879 60H33.9345Z" fill="#112054"/>\n            <path d="M14.5493 60L58.9283 1H54.0817L9.70264 60H14.5493Z" fill="#112054"/>\n            <path d="M-4.83796 60L39.5411 1H34.6945L-9.68457 60H-4.83796Z" fill="#112054"/>\n            <svg>\n                <defs>\n                    <linearGradient id="${t}" x1="1054" y1="1" x2="0" y2="1" gradientUnits="userSpaceOnUse">\n                        ${n?'<stop stop-color="#4CD380"/><stop offset="1" stop-color="#217AFF"/>':'<stop offset="0.05" stop-color="#217AFF"/><stop offset="1" stop-color="#FD6A6A"/>'}\n                    </linearGradient>\n                </defs>\n            </svg>\n        </svg>\n        `}},ChartModule=function(){let t=function(t,e,n,a){let l={type:"line",data:{labels:setMonthsLine(a,e.currentMonth),datasets:[{backgroundColor:"#217AFF",borderColor:"#217AFF",data:e.annualStatistics}]},options:n},i=document.querySelector("."+t).getContext("2d");new Chart(i,l)};return{createChart:t,showChart:function(e,n,a,l){let i=a.find((function(t){return t.id==n}));e.querySelector(".diagram-box_"+l).innerHTML=`<canvas class="line-chart-${n}"></canvas>`,t("line-chart-"+n,i,diagramOptions,diagramMounths)}}}(),ModalCoreModule=function(){let t=document.querySelector(".overlay"),e=document.querySelectorAll(".modal"),n=(document.querySelector(".modal_small"),document.querySelector(".modal_medium"),document.querySelector(".modal_large"),function(){t.classList.remove("overlay_show"),e.forEach((function(t){return t.classList.remove("modal_show")}))});return{closeModals:n,switchModals:function(t,e,n){t.classList.remove(n),e.classList.add(n)},init:function(){t.addEventListener("click",n)}}}(),ModalPlaceModule=function(){let t=document.querySelector(".modal__place-wrapper"),e=["Кабинет ректора","Зал ученого совета","Белый зал","Малый зал"],n={placesFrame:'<svg class="modal__place-item__frame" viewBox="0 0 393 86" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M1.46459 23.5026L1.46459 23.0532L1.78612 22.7393L22.7861 2.2374L23.0969 1.93398L23.5313 1.93398L390.53 1.93399L391.597 1.93399L391.597 3.00063L391.598 62.1686L391.598 62.6105L391.285 62.9229L369.952 84.2562L369.64 84.5686L369.198 84.5686L2.53126 84.5686L1.46459 84.5686L1.46459 83.502L1.46459 23.5026Z" fill="#112054" fill-opacity="0.2" stroke="white" stroke-width="2.13333" />\n        </svg>'};return{init:function(){!function(t,e,n,a){let l="";t.map((function(t){l+=`<div class="modal__${a}-item" data-${a}="${t}">\n                <span>${t}</span>\n                ${e}\n            </div>`})),n.innerHTML=l}(e,n.placesFrame,t,"place");let a=document.querySelectorAll(".modal__place-item"),l=document.querySelectorAll(".modal__place-item__frame");var i,o,c;i=a,o="Белый зал",c="place",e.find((function(t,e){t===o&&(i[e].classList.add(`modal__${c}-item_active`),i[e].querySelector(`.modal__${c}-item__frame`).classList.add("modal_show"))})),t.addEventListener("click",(function(t){let e=t.target.closest("div");e.classList.contains("modal__place-item")&&function(t,e,n,a,l){let i=`modal__${a}-item_active`;t.forEach((function(t){return t.classList.remove(i)})),n.classList.add(i),e.forEach((function(t){return t.classList.remove(l)})),n.querySelector("svg").classList.add(l)}(a,l,e,"place")}))}}}(),ModalTimeModule=function(){let t=document.querySelector(".modal__timetable-wrapper"),e=["06:00","06:10","06:20","06:30","06:40","06:50","07:00","07:10","07:20","07:30","07:40","07:50"],n={timetableFrame:'<svg class="modal__timetable-item__frame" viewBox="0 0 113 58" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M1.06616 19L1.06616 18.5582L1.37858 18.2458L17.3786 2.24574L17.691 1.93332L18.1328 1.93332L110.132 1.93333L111.198 1.93333L111.198 2.99997L111.199 39L111.199 39.4123L110.922 39.7175L95.9221 56.2194L95.6047 56.5686L95.1328 56.5686L2.13281 56.5686L1.06615 56.5686L1.06615 55.502L1.06616 19Z" fill="#112054" fill-opacity="0.2" stroke="white" stroke-width="2.13333"/>\n        </svg>'};return{init:function(){!function(t,e,n,a){let l="";t.map((function(t){l+=`<div class="modal__${a}-item" data-${a}="${t}">\n                <span>${t}</span>\n                ${e}\n            </div>`})),n.innerHTML=l}(e,n.timetableFrame,t,"timetable");let a=document.querySelectorAll(".modal__timetable-item"),l=document.querySelectorAll(".modal__timetable-item__frame");var i,o,c;i=a,o="11:20",c="timetable",e.find((function(t,e){t===o&&(i[e].classList.add(`modal__${c}-item_active`),i[e].querySelector(`.modal__${c}-item__frame`).classList.add("modal_show"))})),t.addEventListener("click",(function(t){let e=t.target.closest("div");e.classList.contains("modal__timetable-item")&&function(t,e,n,a,l){let i=`modal__${a}-item_active`;t.forEach((function(t){return t.classList.remove(i)})),n.classList.add(i),e.forEach((function(t){return t.classList.remove(l)})),n.querySelector("svg").classList.add(l)}(a,l,e,"timetable")}))}}}(),ModalCalendarModule=function(){let t,e,n,a,l=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],i=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],o=document.querySelector(".modal__calendar-body"),c=document.querySelectorAll(".modal__calendar-arrow__btn"),r=function(){let e=i[t];document.querySelector(".modal__calendar-month").innerHTML=e},s=function(){o.innerHTML="",function(){let n,l=[],i=0;l[i]=[];let o=new Date(e,t+1,0).getDate();for(let c=1;c<=o;c++)1!=new Date(e,t,c).getDay()?(n={index:c},n.index===a&&(n.mark="today"),l[i].push(n)):(i++,l[i]=[],n={index:c},l[i].push(n)),n.index===a&&(n.mark="today");if(l[0].length>0)for(let t=l[0].length;t<7;t++)l[0].unshift("");return l}().map((function(t){let e="<tr>";t.map((function(n,a){let l=n.mark?"today":null;e+=`<td class="day-cell ${l}"> ${n.index?`<span>${n.index}</span>`:""}</td>`,t[a-1]==t.length&&(e+="</tr>")})),o.innerHTML+=e}))},d=function(){setTimeout((function(){s(),_()}),0)},u=function(n){n.classList.contains("increase")?(t++,t>11&&(t=0,e++),r(),d()):(t--,t<0&&(t=11,e--),r(),d())},_=function(){o.querySelectorAll(".day-cell span").forEach((function(t){t.addEventListener("click",(function(){var e;e=t.textContent,n.setDate(e),a=n.getDate(),d()}))}))};return{init:function(){t=(new Date).getMonth(),e=(new Date).getFullYear(),n=new Date,a=(new Date).getDate(),function(){let t="";l.map((function(e){t+=`<td>${e}</td>`})),document.querySelector(".modal__calendar-days").innerHTML=t}(),r(),document.querySelector(".modal__calendar-year").innerHTML=e,s(),_(),c.forEach((function(t){t.addEventListener("click",(function(){u(t)}))}))}}}(),ModalEventsModule=function(){let t=document.querySelector(".modal_small"),e=document.querySelector(".modal_medium"),n=document.querySelector(".modal_large"),a=n.querySelector(".modal__submit"),l=document.querySelectorAll(".modal__btn_confirm"),i=document.querySelectorAll(".modal__btn_cancelled"),o=document.querySelector(".modal__select-report"),c=document.querySelector(".modal__select-meeting"),r={type:"meeting",payload:{}};return{init:function(){o.addEventListener("click",(function(){ModalCoreModule.switchModals(e,n,"modal_show")})),c.addEventListener("click",(function(){r.type="report",r.payload={},ModalCoreModule.switchModals(n,e,"modal_show")})),a.addEventListener("click",(function(){r.type="meeting",r.payload={},ModalCoreModule.switchModals(n,t,"modal_show")})),i.forEach((function(t){t.addEventListener("click",(function(){ModalCoreModule.closeModals()}))})),l.forEach((function(t){t.addEventListener("click",(function(){ModalCoreModule.closeModals(),console.log(r)}))}))}}}(),MenuModule=function(){let t=function(t){let e=document.querySelector(".plan__tabcontent-block__wrap_menu"),n="";t.sort(SortModule.byField("fact")).map((function(t){n+=function(t){let e=t.name,n=t.color,a=t.id,l=t.plan,i=t.fact,o=t.isIcrease;return`\n            <div class="plan__menu-block" data-id=${a}>\n                <svg class="plan__graphiс" width="100%" overflow="visible" viewBox="0 0 120 3" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <rect class="plan__graphiс-row" height="5%"  width="10%" fill="${n}" x="3" y="0.4" />\n                    <rect  class="plan__graphiс-right-rect" stroke="${n}" x="10%" y="0"  fill="white"/>\n                    <rect  class="plan__graphiс-left-rect" stroke="${n}" x="0" y="0" fill="transparent"/>\n                </svg>\n                <div class="plan__menu-block__wrap">\n                    <div class="plan__menu-block__descr">${e}</div>\n                </div>\n                <div class="plan__menu-block__info">\n                    ${ProgressBarModule.setProgressbar(a,i,o,"menu")}\n                    <div class="plan__menu-block__indicators">\n                        <div class="plan__menu-block__value">${i}%</div>\n                        <div class="plan__menu-block__current-plan">\n                            <span class="plan__menu-block__current-plan-value">${l}</span>\n                            <span class="plan__menu-block__current-plan-descr">тыс.руб.</span>\n                        </div>\n                    </div>\n                    <img class="plan__menu-block__alarm" data-id="${a}" src="../assets/img/plan-icons/alarm.svg">\n                </div> \n                <div class="diagram-box_menu"></div>\n            </div>\n        `}(t)})),e.innerHTML=n},e=function(t){let e=document.querySelectorAll(".plan__menu-block"),n=[];t.map((function(t){t.items?n.push(t.items.length):n.push(0)})),e.forEach((function(t,e){let a=t.children[0].children[0],l=t.children[0].children[1],i=n[e]+10;i=i>10?i:10,i=i>90?i=90:i,a.setAttribute("width",i+"%"),l.setAttribute("x",i+"%")}))};return{init:function(n){t(n),e(n);let a=document.querySelectorAll(".plan__menu-block"),l=document.querySelectorAll(".diagram-box_menu");a.forEach((function(t){t.addEventListener("click",(function(e){let i=+t.getAttribute("data-id");if("plan__menu-block__alarm"==e.target.className)ModalModule.openModal(i,n);else{document.querySelectorAll(".plan__menu-block").forEach((function(t){let e=t.children[0].children[0],n=t.children[0].children[1];e.setAttribute("width","10%"),n.setAttribute("x","10%")}));let e=this.children[0].children[0],o=this.children[0].children[1],c=this.children[1].children[0].textContent;e.setAttribute("width","100%"),o.setAttribute("x","100%"),TitleModule.setTitle(c),ContentModule.setContent(SortModule.getSortData(n,i)),a.forEach((function(t){return t.classList.remove("plan__menu-block_opened")})),l.forEach((function(t){return t.innerHTML=""})),t.classList.add("plan__menu-block_opened"),ChartModule.showChart(t,i,n,"menu")}}))})),document.querySelector(".header__link_get-all-plan").addEventListener("click",(function(){ContentModule.setContent(SortModule.getSortData(n)),TitleModule.setTitle("План выполнения поступлений денежных средств по НИР"),e(n),a.forEach((function(t){return t.classList.remove("plan__menu-block_opened")})),l.forEach((function(t){return t.innerHTML=""}))}))}}}(),SortModule=function(){let t=[],e=function(e){e.items.map((function(n){n.color=e.color,t.push(n)}))},n=function(t){return function(e,n){return e[t]<n[t]?1:-1}};return{byField:n,getSortData:function(a,l){return t=[],void 0!==l?a.find((function(t){t.items&&t.id==l&&e(t)})):a.map((function(t){t.items&&e(t)})),TitleModule.setSubtitle(t.length),t.sort(n("fact"))}}}(),PartnerModule=function(){function t(t,e){this.array=t,this.className="plan__tabcontent-block__wrap",this.modifier=e,this.parent=document.querySelector(".plan__tabcontent-block_"+this.modifier),this.count=this.array.length}return t.prototype.bg=function(t){let e="";return t>0&&t<3&&(e="middle"),`\n            <svg class="plan__tabcontent-block__bg plan__tabcontent-block__bg_${e} hide" viewBox="0 0 1269 675" fill="none" xmlns="http://www.w3.org/2000/svg">\n                \x3c!-- SVG код фона --\x3e\n            </svg>\n        `},t.prototype.divider=function(){return'\n            <svg class="plan__tabcontent-block__divider" viewBox="0 0 800 39" fill="none" xmlns="http://www.w3.org/2000/svg">\n                \x3c!-- SVG код разделителя --\x3e\n            </svg>\n        '},t.prototype.createBlockItem=function(t,e){return`\n            <div class="plan__tabcontent-block__item" data-id="${t.id}">\n                ${3===e?'<div class="diagram-box_list"></div>':""} \n                ${this.bg(e)}\n                <div class="plan__tabcontent-block__info">\n                    <svg class="plan__tabcontent-block__mark" width="100%" overflow="visible" viewBox="0 0 120 3" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <rect stroke="${t.color}" x="0" y="0" fill="white"/>\n                    </svg>\n                    <div class="plan__tabcontent-block__descr">${t.name}</div>\n                    <div class="plan__tabcontent-block__value">${t.fact}%</div>\n                </div>\n                ${ProgressBarModule.setProgressbar(this.modifier+"-"+e,Math.ceil(t.fact),t.isIncrease)}\n                <div class="plan__tabcontent-block__info plan__tabcontent-block__info_bottom">\n                    ${this.divider()}\n                    <div class="plan__tabcontent-block__current-plan">\n                        <span class="plan__tabcontent-block__current-plan-value">${t.plan}</span>\n                        <span class="plan__tabcontent-block__current-plan-descr">тыс.руб.</span>\n                    </div>\n                </div>\n                ${e<=2?'<div class="diagram-box_list"></div>':""} \n            </div>\n        `},t.prototype.render=function(){let t=document.createElement("div");t.classList.add(this.className),this.array.length>3?t.classList.add(this.className):(t.classList.add(this.className),t.classList.add("plan__tabcontent-block__wrap_min-content"));let e="";this.array.forEach(function(t,n){e+=this.createBlockItem(t,n)}.bind(this)),t.innerHTML="",t.innerHTML=e,this.parent.append(t)},t.prototype.renderEmptyBlock=function(){document.createElement("div").classList.add(this.className),this.parent.innerHTML=""},{Partner:t}}(),PaginationModule={init:function(){}},ContentModule={setContent:function(t){let e=1,n=!0,a=[],l=Math.ceil(t.length/8),i=function(t,e,n){return t.slice(e,n)};setPages(l);let o=document.querySelectorAll(".plan__tabcontent");showCurrentPage(o);for(let t=1;t<=l;t++)a.push(btn(t));function c(t){document.querySelector(".plan__tabheader-btns").innerHTML="";let n=[];if(1!=l){if(2==t.length)e<l?n=t.slice(e-1,e+1):e==l&&(n=t.slice(e-2,e+1));else if(e<l-1)n=t.slice(e-1,e+2);else if(e<l)n=t.slice(e-2,e+1);else{if(e!=l)return;n=t.slice(e-3,e)}n.unshift(next),n.push(prev),document.querySelector(".plan__tabheader-btns").innerHTML=`\n                ${n.join("")}\n            `,document.querySelector(".plan__tabitem-next").addEventListener("click",r),document.querySelector(".plan__tabitem-prev").addEventListener("click",s),d()}}function r(){return n=!0,!(e>=a.length)&&1!=l&&void(l>1&&(e++,(e<a.length-1||n)&&c(a),document.querySelectorAll(".plan__tabitem-btn").forEach((function(t){t.classList.remove("plan__tabitem_active"),t.getAttribute("data-page")==e&&t.classList.add("plan__tabitem_active")})),showCurrentPage(o,e-1)))}function s(){if(n=!0,e<=1)return!1;e--,e<a.length-1&&c(a),document.querySelectorAll(".plan__tabitem-btn").forEach((function(t){t.classList.remove("plan__tabitem_active"),t.getAttribute("data-page")==e&&t.classList.add("plan__tabitem_active")})),showCurrentPage(o,e-1)}function d(){document.querySelectorAll(".plan__tabitem-btn").forEach((function(t){t.addEventListener("click",(function(a){document.querySelectorAll(".plan__tabitem-btn").forEach((function(t){t.classList.remove("plan__tabitem_active")})),t.classList.add("plan__tabitem_active");let l=t.getAttribute("data-page");e=l,n=!1,showCurrentPage(o,e-1)}))}))}c(a),document.querySelector(".plan__tabheader").addEventListener("selectstart",(function(){return!1})),d();for(let t=0;t<l;t++)o[t].innerHTML=setPage(t+1);!function(){let e=0;if(0===l)for(let t=1;t<=l+1;t++)new Partner([],`p${t}-m`).renderEmptyBlock(),new Partner([],`p${t}-r`).renderEmptyBlock();else for(let n=1;n<=l;n++)new Partner(i(t,e,e+4),`p${n}-m`).render(),e+=4,new Partner(i(t,e,e+4),`p${n}-r`).render(),e+=4}();let u=document.querySelectorAll(".plan__tabcontent-block__item"),_=document.querySelectorAll(".diagram-box_list"),p=document.querySelectorAll(".plan__tabcontent-block__bg");u.forEach((function(t){t.addEventListener("click",(function(){let e=t.getAttribute("data-id"),n=t.querySelector(".plan__tabcontent-block__bg");p.forEach((function(t){return t.classList.remove("show")})),n.classList.add("show"),_.forEach((function(t){return t.innerHTML=""})),showChart(t,e,sortData,"list")}))})),document.addEventListener("click",(function(t){let e=t.target.className;"plan__wrapper"!=e&&"plan__tabcontent-wrap"!=e&&"plan__tabcontent-block__wrap plan__tabcontent-block__wrap_min-content"!=e&&"plan__header-title"!=e&&"plan__header"!=e&&"subtitle"!=e&&"plan__tabcontent plan__tabcontent_p1"!=e||(p.forEach((function(t){return t.classList.remove("show")})),_.forEach((function(t){return t.innerHTML=""})))}))}};document.addEventListener("DOMContentLoaded",(function(){TitleModule.setTitle("План выполнения поступлений денежных средств по НИР"),ProgressBarModule.init(),ChartModule.init(),ModalCoreModule.init(),ModalPlaceModule.init(),ModalTimeModule.init(),ModalCalendarModule.init(),ModalEventsModule.init(),MenuModule.init(planData),SortModule.init(planData),PartnerModule.init(),PaginationModule.init(),ContentModule.init(planData)}));