const ERROR_MSG='<p style="color:var(--accent);text-align:center;">Ошибка загрузки данных</p>',NO_DATA_MSG="<p>Нет данных</p>",SECTIONS={main:"Основные программы",spo:"СПО",dop_angl:"Обучение на английском"},MAIN_SUBSECTIONS={"I. ОСНОВНЫЕ ОБРАЗОВАТЕЛЬНЫЕ ПРОГРАММЫ (БАКАЛАВРИАТ)":"Бакалавриат","II. ОСНОВНЫЕ ОБРАЗОВАТЕЛЬНЫЕ ПРОГРАММЫ (СПЕЦИАЛИТЕТ)":"Специалитет","III. ОСНОВНЫЕ ОБРАЗОВАТЕЛЬНЫЕ ПРОГРАММЫ (МАГИСТРАТУРА)":"Магистратура","IV. ПОДГОТОВКА КАДРОВ ВЫСШЕЙ КВАЛИФИКАЦИИ И НАУЧНЫХ КАДРОВ (АСПИРАНТУРА)":"Аспирантура"};function renderMainTable(t){let e=document.getElementById("main-table");if(!e)return;let n=t&&t.main;if(!n)return void(e.innerHTML=NO_DATA_MSG);let c=document.querySelector(".main-title"),a=document.querySelector(".main-title_italic"),l=document.querySelector(".subtitle");c&&(c.textContent="СТОИМОСТЬ"),a&&(a.textContent="обучения по программам бакалавриата, специалитета, магистратуры, аспирантуры"),l&&(l.textContent="(для поступающих на первый курс в 2025/26 учебном году)");let o="";renderNavigation(t.main),Object.keys(n).forEach((function(t){let e=n[t];o+=`<div class="section-title" id="section-${escapeHTML(t)}">${escapeHTML(t)}</div>`,Object.keys(e).forEach((function(t){let n=e[t];o+='<div class="form-title">'+escapeHTML(t)+"</div>",o+='<table><thead><tr><th class="name-cell"  width="15%">Код <br> НП(С)/НС</th><th class="name-cell" width="35%">Направление обучения / <br> специальность</th><th class="name-cell" width="35%">Профиль/специализация</th><th class="name-cell" width="15%">Cтоимость обучения<br>в год на одного обучающегося, руб.</th></tr></thead><tbody>',n.forEach((function(t){o+='<tr><td colspan="4" class="faculty-title">'+escapeHTML(t.faculty)+"</td></tr>",t.directions&&t.directions.forEach((function(t){let e=t.profiles?t.profiles.length:0;t.profiles&&t.profiles.forEach((function(n,c){o+="<tr>"+(0===c?'<td class="code-cell" rowspan="'+e+'">'+escapeHTML(t.code)+'</td><td class="name-cell" rowspan=" '+e+'">'+escapeHTML(t.name)+"</td>":"")+'<td class="name-cell">'+(n.name?escapeHTML(n.name):"-")+'</td><td class="cost-cell">'+formatCost(n.cost)+"</td></tr>"}))}))})),o+="</tbody></table>"}))})),e.innerHTML=o}function renderSpoTable(t){let e=document.getElementById("spo-table");if(!e)return;let n=t&&t["СПО"];if(!n)return void(e.innerHTML=NO_DATA_MSG);let c='<div class="section-title">I. ОСНОВНЫЕ ОБРАЗОВАТЕЛЬНЫЕ ПРОГРАММЫ СРЕДНЕГО ПРОФЕССИОНАЛЬНОГО ОБРАЗОВАНИЯ</div>';c+='<table><thead><tr><th class="name-cell width="40%">Наименование структурного подразделения среднего профессионального образования</th><th class="name-cell width="15%">Код специальности</th><th class="name-cell width="30%">Наименование специальности</th><th class="name-cell width="15%">Стоимость обучения в год на одного обучающегося, руб.</th></tr></thead><tbody>',Object.keys(n).forEach((function(t){let e=n[t];c+='<tr><td colspan="4" class="form-title">'+escapeHTML(t)+"</td></tr>",e&&e.forEach((function(t){let e=t.specialties?t.specialties.length:0;t.specialties&&t.specialties.forEach((function(n,a){c+="<tr>"+(0===a?'<td class="name-cell" rowspan="'+e+'">'+escapeHTML(t.department)+"</td>":"")+'<td class="name-cell">'+escapeHTML(n.code)+'</td><td class="name-cell">'+escapeHTML(n.name)+'</td><td class="cost-cell">'+formatCost(n.cost)+"</td></tr>"}))}))})),c+="</tbody></table>",e.innerHTML=c}function renderDopAnglTable(t){let e=document.getElementById("dop-angl-table");if(!e)return;let n=t&&t["ДОП_англ"];if(!n)return void(e.innerHTML=NO_DATA_MSG);let c=document.querySelector(".main-title"),a=document.querySelector(".main-title_italic"),l=document.querySelector(".subtitle");c&&(c.textContent="СТОИМОСТЬ"),a&&(a.textContent="дополнительных образовательных услуг по основным образовательным программам бакалавриата и магистратуры, реализация которых осуществляется на английском языке"),l&&(l.textContent="(для поступающих на первый курс на места за счет федерального бюджета в 2024/25 учебном году)");let o='<div class="faculty-title">Оплата обучения на английском языке для лиц, обучающихся на местах за счет средств федерального бюджета</div>';if(o+='<table><thead><tr><th class="name-cell width="40%">Наименование структурного подразделения</th><th class="name-cell width="45%">Наименование направления (уровень)</th><th class="name-cell width="15%">Стоимость услуги в год на одного обучающегося, руб.</th></tr></thead><tbody>',Array.isArray(n)){let t="",e=0,c=[];n.forEach((function(n){n.faculty!==t?(""!==t&&c.push({faculty:t,rows:e}),t=n.faculty,e=1):e++})),c.push({faculty:t,rows:e});t="",n.forEach((function(e,n){if(e.faculty!==t){t=e.faculty;let n=c.find(e=>e.faculty===t);o+='<tr><td class="name-cell" rowspan="'+n.rows+'">'+escapeHTML(e.faculty)+'</td><td class="name-cell">'+escapeHTML(e.direction)+'</td><td class="cost-cell">'+formatCost(e.cost)+"</td></tr>"}else o+='<tr><td class="name-cell">'+escapeHTML(e.direction)+'</td><td class="cost-cell">'+formatCost(e.cost)+"</td></tr>"}))}o+="</tbody></table>",e.innerHTML=o}function formatCost(t){if(!t)return"-";if("string"==typeof t&&t.includes("/"))return t.split("/").map(t=>{const e=parseInt(t.replace(/\D/g,""));return isNaN(e)?t.trim():new Intl.NumberFormat("ru-RU").format(e)+" ₽"}).join(" / ");const e=parseInt(String(t).replace(/\D/g,""));return isNaN(e)?"-":new Intl.NumberFormat("ru-RU").format(e)+" ₽"}function escapeHTML(t){return t?String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/'/g,"&nbsp;"):""}function updateTitlesForTab(t){let e=document.querySelector(".main-title"),n=document.querySelector(".main-title_italic"),c=document.querySelector(".subtitle");if(e&&n&&c)switch(t){case"main":e.textContent="СТОИМОСТЬ",n.textContent="обучения по программам бакалавриата, специалитета, магистратуры, аспирантуры",c.textContent="(для поступающих на первый курс в 2025/26 учебном году)";break;case"spo":e.textContent="СТОИМОСТЬ",n.textContent="обучения по программам среднего профессионального образования",c.textContent="(для поступающих на первый курс в 2025/26 учебном году)";break;case"dop_angl":e.textContent="СТОИМОСТЬ",n.textContent="дополнительных образовательных услуг по основным образовательным программам бакалавриата и магистратуры, реализация которых осуществляется на английском языке",c.textContent="(для поступающих на первый курс на места за счет федерального бюджета в 2024/25 учебном году)"}}function renderNavigation(t){const e=document.getElementById("nav-list");if(!e)return void console.error('Element with id "nav-list" not found');let n="";Object.keys(SECTIONS).forEach(e=>{n+=`\n            <li class="nav-item">\n                <a href="#" class="nav-link ${"main"===e?"active":""}" \n                   data-section="${e}">\n                    ${SECTIONS[e]}\n                </a>\n            </li>\n        `,"main"===e&&(n+=`<ul class="sub-nav ${"main"===e?"active":""}" id="main-sub-nav">`,Object.keys(MAIN_SUBSECTIONS).forEach(e=>{const c=t&&t[e];n+=`\n                    <li class="sub-nav-item">\n                        <a href="#" class="sub-nav-link" \n                           data-subsection="${e}"\n                           ${c?"":'style="opacity:0.5;pointer-events:none"'}>\n                            ${MAIN_SUBSECTIONS[e]}\n                            ${c?"":" (нет данных)"}\n                        </a>\n                    </li>\n                `}),n+="</ul>")}),e.innerHTML=n,setupNavigationHandlers()}function setupNavigationHandlers(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",(function(t){t.preventDefault();const e=this.dataset.section;document.querySelectorAll(".nav-link").forEach(t=>t.classList.remove("active")),this.classList.add("active");const n=document.getElementById("main-sub-nav");n&&n.classList.toggle("active","main"===e),openTab(e)}))}),document.querySelectorAll(".sub-nav-link").forEach(t=>{"none"!==t.style.pointerEvents&&t.addEventListener("click",(function(t){t.preventDefault();const e=this.dataset.subsection;document.querySelectorAll(".sub-nav-link").forEach(t=>t.classList.remove("active")),this.classList.add("active"),scrollToSubsection(e)}))})}function scrollToSubsection(t){const e=document.getElementById("section-"+t);e&&(e.scrollIntoView({behavior:"smooth",block:"start"}),e.style.transition="background-color 0.3s",e.style.backgroundColor="rgba(52, 152, 219, 0.2)",setTimeout(()=>{e.style.backgroundColor=""},2e3))}function openTab(t){var e=document.querySelectorAll(".tab"),n=document.querySelectorAll(".tab-content");if(e.forEach((function(e){var n=e.getAttribute("onclick")||"",c=-1!==n.indexOf("'"+t+"'")||-1!==n.indexOf('"'+t+'"');e.classList.toggle("active",c)})),n.forEach((function(e){e.classList.toggle("active",e.id===t)})),updateTitlesForTab(t),"main"!==t){const t=document.getElementById("main-sub-nav");t&&t.classList.remove("active")}window.scrollTo({top:0,behavior:"smooth"})}function setupScrollSpy(){const t=document.querySelectorAll(".section-title"),e=document.querySelectorAll(".sub-nav-link");window.addEventListener("scroll",()=>{let n="";t.forEach(t=>{const e=t.offsetTop,c=t.clientHeight,a=t.getAttribute("id").replace("section-","");window.scrollY>=e-200&&window.scrollY<=e+c-100&&(n=a)}),e.forEach(t=>{t.classList.remove("active"),t.dataset.subsection===n&&t.classList.add("active")})})}fetch("../data/data.json").then((function(t){if(!t.ok)throw new Error("Network error");return t.json()})).then((function(t){renderMainTable(t),renderSpoTable(t),renderDopAnglTable(t)})).catch((function(t){console.error("Fetch error:",t),document.querySelectorAll(".tab-content").forEach((function(t){t.innerHTML=ERROR_MSG}))})),document.querySelectorAll(".tab").forEach((function(t){t.addEventListener("click",(function(){openTab(this.dataset.tab)}))})),document.addEventListener("DOMContentLoaded",(function(){const t=window.location.hash;if(t){const e=t.replace("#",""),n=document.querySelector(`.sub-nav-link[data-subsection="${e}"]`);n&&n.classList.add("active")}else document.querySelector(".sub-nav-link")&&document.querySelector(".sub-nav-link").classList.add("active")}));