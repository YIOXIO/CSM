const modal=document.querySelector("#modal"),closeModalButton=document.querySelector(".close"),iframe=document.querySelector("#modal-iframe"),popup=document.querySelector(".popup"),popupContent=document.querySelector(".popup__content");function openModal(e){modal.style.display="block",iframe.src=e.getAttribute("href")}function closeModal(){modal.style.display="none",iframe.src=""}closeModalButton.addEventListener("click",closeModal);let cards=document.querySelectorAll("a");function openPopup(e){popupContent.innerHTML="",popupContent.appendChild(e),popup.classList.add("popup_is_active"),popup.addEventListener("click",handleOverlayClosePopup),document.addEventListener("keydown",handleEscClosePopup)}function closePopup(e){(e.target===e.currentTarget||e.target.classList.contains("close"))&&(popup.classList.remove("popup_is_active"),popupContent.innerHTML="",popup.removeEventListener("click",handleOverlayClosePopup),document.removeEventListener("keydown",handleEscClosePopup))}function handleOverlayClosePopup(e){e.target===e.currentTarget&&closePopup(e.currentTarget)}function handleEscClosePopup(e){"Escape"===e.key&&closePopup(document.querySelector(".popup_is_active"))}function handleClick(e){document.querySelectorAll(e).forEach((function(e){e.addEventListener("click",(function(o){o.preventDefault();let n=e.cloneNode(!0);n.querySelectorAll("br").forEach((function(e){e.parentNode.removeChild(e)})),n.querySelectorAll("a").forEach((function(e){e.addEventListener("click",(function(o){this.classList.contains("link-unvailable")||(o.preventDefault(),openModal(e))}))})),openPopup(n)}))}))}cards.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),openModal(this)}))})),popup.addEventListener("click",closePopup),handleClick(".scale-on-click");