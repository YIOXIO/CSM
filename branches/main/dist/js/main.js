document.addEventListener("DOMContentLoaded",()=>{document.querySelector("#portraits").addEventListener("click",()=>{}),document.querySelector("#students").addEventListener("click",()=>{}),document.querySelector("#finance").addEventListener("click",()=>{}),document.querySelector("#staff").addEventListener("click",()=>{});const t=(t,e)=>document.querySelector("."+t).innerHTML=e;function e(t){let e,a=t.toString();if(-1!==a.indexOf(".")){a=t.toString().split(".");const n=a[0],s=a[1];e=n.length<=3?n:n.replace(/(\d)(?=(\d{3})+$)/g,"$1 "),e+="."+s}else e=a.length<=3?a:a.replace(/(\d)(?=(\d{3})+$)/g,"$1 ");return e}var a;a="#112054",document.querySelector("body").style.background=a;!function(t,a=6300){const n=Array.from(document.querySelectorAll(".absolute-progrss-bar path"));let s=function(t,e){let a;a=e>100?t.length:Math.round(t.length/100*e);return a}(n,t);setTimeout(()=>{!function(t,e,a){for(let n=0;n<e;n++)t[n].style.fill=a}(n,s,"#FB9B2B")},a),document.querySelector(".performance-diagram-absolute-value").textContent=e(t)+"%"}(77);!function(t){for(let a in t)console.log(a),"seniorityPPS"!=a&&"seniorityNR"!=a||(document.querySelector(".circle-block__value_"+a).textContent=e(t[a]+"%")),document.querySelector(".circle-block__value_"+a).textContent=e(t[a])}({students:4844,score:4.2,cash:28.3,subsidies:7.1,seniorityPPS:75.7,seniorityNR:41.5});const n={date:"2021-10-02",total:6e8,budgetResources:2e8,otherResources:2e8,wageFund:2e8,landTax:1e9,propertyTax:"100000000"};let s=Object.values(n).slice(2,4),r=Object.values(n).slice(4,7).reverse();const i=t=>t.map(t=>parseInt(t));class l{constructor(t,e,a,n,s=!1){this.parentSelector=document.querySelector("."+n),this.segmentColors=a,this.isDecorated=s,this.title=t,this.data=e,this.fill="transparent",this.diff(),this.offset(),this.sector(),this.insDiagramSectors(),this.diagrammSegmentConfig()}get diagramValues(){const t=this.data.reduce((t,e)=>t+e);let e=this.data.map(e=>Math.round(e/t*100)),a=Math.max(...e);this.isDecorated&&(e=e.map(t=>0===t?0:t<5?5:t));const n=e.reduce((t,e)=>t+e)-100;return e.map(t=>t===a?t-n:t)}get internalEclipseColor(){return this.segmentColors[this.segmentColors.length-1]}diff(t){return 100-t}offset(t){let e=0,a=0;return this.diagramValues.map((e,n,s)=>{if(n==t&&0!==n){for(let t=0;t<n;t++)a+=s[t];a=100-a}}),e=25+a,e}diagrammSegmentConfig(t=15.91549430918954){return`class="donut-segment" cx="21" cy="21" r="${t}"`}sector(t,e){const a=0==e?10:e==this.diagramValues.length-1?5:7;return`<circle  ${this.diagrammSegmentConfig()} fill="${this.fill}" stroke="${this.segmentColors[e]}" stroke-width="${a}" stroke-dasharray="${t} ${this.diff(t)}" stroke-dashoffset="${this.offset(e)}"></circle>`}insDiagramSectors(){return this.diagramValues.map((t,e)=>this.sector(t,e)).join("")}render(){const t=document.createElement("div");t.classList.add("diagram"),t.innerHTML=`\n    \n                <svg width="100%" height="100%" viewBox="0 0 42 42" class="donut">\n                    ${this.insDiagramSectors()}\n                    <circle ${this.diagrammSegmentConfig(12)} fill="${this.fill}" stroke="${this.internalEclipseColor}" stroke-width="0.3"></circle>\n                </svg>\n    \n                <div class="finance__diagram-text">${this.title}</div>\n            `,this.parentSelector.append(t)}}var o;new l("Фонд оплаты труда",i(s),["#2BD6FB","#217AFF"],"finance__diagram_wage-fund").render(),new l("Затраты",i(r),["#FFC01D","#FB9B2B","#FD6A6A"],"finance__diagram_сosts",!0).render(),t("finance__total-value",e((o=n).total)),t("finance__diagram-value_budget-resources",e(o.budgetResources)),t("finance__diagram-value_other-resources",e(o.otherResources)),t("finance__diagram-value_wage-fund",e(o.wageFund)),t("finance__diagram-value_land-tax",e(o.landTax)),t("finance__diagram-value_property-tax",e(o.propertyTax)),document.querySelectorAll(".finance__diagram-value").forEach(t=>function(t){let e=t.textContent.length,a="right";(t.classList.contains("finance__diagram-value_wage-fund")||t.classList.contains("finance__diagram-value_other-resources"))&&(a="left"),1===e&&(t.style[a]="1.6vw")}(t));const c={date:"2021-10-02",teachingStaff:73,supervisors:17,managementStaff:42,supportStaff:20,serviceStaff:6,professionalEducationAndLyceum:49};new l("Состав",i(Object.values(c).slice(1)),["#217AFF","#EF8E8E","#2BD6FB","#627DAE","#4CD382","#6C38FF"],"staff__diagram").render();const d="2021-12-01",u={occupation:{fullTime:30164,distance:5634,extramural:7061},payment:{public:9831,nonBudget:33928},groups:{bachelors:1214535,specialists:2421360,magisters:6422663}};!function(e){const a=Array.from(document.querySelectorAll(".students__teaching-load-progressbar span"));!function(t,e,a){for(let n=0;n<e;n++)t[n].style.backgroundColor=a}(a,function(t,e){let a;return a=e>100?t.length:Math.round(t.length/100*e),a}(a,e.ratio),"#1A5FC7"),t("spanstudents__teaching-load-value",e.hours),t("students__teaching-load-ratio",e.ratio+"%")}({hours:9505372332,ratio:6.7}),function(a){const n=Array.from(document.querySelectorAll(".students__graphic svg"));function s(...t){return t.reduce((t,e)=>t+e)}const r=(t,e)=>Math.ceil(t/e*100),i=s(a.occupation.fullTime,a.occupation.distance,a.occupation.extramural),l=s(a.payment.public,a.payment.nonBudget);n[0].setAttribute("width",r(a.occupation.fullTime,i)),n[1].setAttribute("width",r(a.occupation.distance,i)),n[2].setAttribute("width",r(a.occupation.extramural,i)),n[3].setAttribute("width",r(a.payment.public,l)),n[4].setAttribute("width",r(a.payment.nonBudget,l)),t("students__graphic-value_fullTime",e(a.occupation.fullTime)),t("students__graphic-value_distance",e(a.occupation.distance)),t("students__graphic-value_extramural",e(a.occupation.extramural)),t("students__graphic-value_public",e(a.payment.public)),t("students__graphic-value_nonBudget",e(a.payment.nonBudget))}(u),document.querySelector(".calendar-staff").setAttribute("data-date",c.date),document.querySelector(".calendar-finance").setAttribute("data-date",n.date),document.querySelector(".calendar-students").setAttribute("data-date",d),function(){class t extends HTMLElement{constructor(t,e,...a){self=super(),this.constructor.setMixins(a);const n=this.constructor.setTemplate(t,e);this.$=this.constructor.setShadowDOM(n)}static setMixins(t){Object.assign(this.prototype,...t)}static setTemplate(t,e){const a=document.createElement("template");return a.innerHTML=t+`<style>${e}</style>`,a}static setShadowDOM(t){const e=self.attachShadow({mode:"open"});return e.appendChild(t.content.cloneNode(!0)),e}}window.HTMLElementExtended=t;class e extends t{constructor(){super('\n          <div class="calendar_staff">\n            <div class="calendar-unit">\n              <div class="value"></div>\n              <div class="calendar__month-progress-bar">\n                <svg class="calendar__month-progress-bar__staff" width="100%" height="100%" viewBox="0 0 100 12" fill="none"\n                  xmlns="http://www.w3.org/2000/svg">\n                  <path d="M4.5 0H0.5L11.5 12H15.5L4.5 0Z" fill="#40394D" />\n                  <path d="M10.5 0H6.5L17.5 12H21.5L10.5 0Z" fill="#40394D" />\n                  <path d="M16.5 0H12.5L23.5 12H27.5L16.5 0Z" fill="#40394D" />\n                  <path d="M22.5 0H18.5L29.5 12H33.5L22.5 0Z" fill="#40394D" />\n                  <path d="M28.5 0H24.5L35.5 12H39.5L28.5 0Z" fill="#40394D" />\n                  <path d="M34.5 0H30.5L41.5 12H45.5L34.5 0Z" fill="#40394D" />\n                  <path d="M40.5 0H36.5L47.5 12H51.5L40.5 0Z" fill="#40394D" />\n                  <path d="M46.5 0H42.5L53.5 12H57.5L46.5 0Z" fill="#40394D" />\n                  <path d="M52.5 0H48.5L59.5 12H63.5L52.5 0Z" fill="#40394D" />\n                  <path d="M58.5 0H54.5L65.5 12H69.5L58.5 0Z" fill="#40394D" />\n                  <path d="M64.5 0H60.5L71.5 12H75.5L64.5 0Z" fill="#40394D" />\n                  <path d="M70.5 0H66.5L77.5 12H81.5L70.5 0Z" fill="#40394D" />\n                  <path d="M76.5 0H72.5L83.5 12H87.5L76.5 0Z" fill="#40394D" />\n                  <path d="M82.5 0H78.5L89.5 12H93.5L82.5 0Z" fill="#40394D" />\n                  <path d="M88.5 0H84.5L95.5 12H99.5L88.5 0Z" fill="#40394D" />\n                </svg>\n              </div>\n            </div>\n          </div>\n        ',"\n          .calendar-unit {display: block;block;margin-top: 0.5vw;}\n          .right {text-align: right;}\n          .right svg {transform: scaleX(-1);}\n          .value {\n            font-family: 'Oswald', sans-serif;\n            /* text-align: left; */\n            font-weight: 400;\n            color: #FB9B2B;\n            font-size: 0.6vw;\n            line-height: 0.6vw;\n          }\n        "),this.render()}set currentDate(t){this.date=new Date(t)}get data(){return this.parentNode.getAttribute("data-date")}get bar(){return this.$.querySelector("svg").children}get dir(){return"left"===this.getAttribute("dir")?"left":"right"}get diff(){return this.dayOfYear(this.date)/this.daysInYear(this.date)}get value(){return{left:this.date.toLocaleString("ru-Ru").split(",")[0],right:`год ${Math.floor(100*this.diff)}%`}[this.dir]}setProgressBar(t,e,a){e<1&&(e=1);for(let n=0;n<e;n++)t[n].style.fill=a}dayOfYear(t){const e=t.getFullYear();return Math.floor((t-new Date(e,0,0))/1e3/60/60/24)}daysInYear(t){const e=t.getFullYear();return e%4==0&&e%100>0||e%400==0?366:365}lastDay(t){const e=t.getFullYear(),a=t.getFullYear();return new Date(e,a+1,0).getDate()}calc(t,e){const{length:a}=e;return{left:Math.floor(a*(t.getDate()/this.lastDay(t))),right:Math.floor(a*this.diff)}}async render(){this.currentDate=this.data;const t=this.calc(this.date,this.bar)[this.dir];this.setProgressBar(this.bar,t,"#FB9B2B"),this.$.firstElementChild.classList.toggle(this.dir),this.$.querySelector(".value").textContent=this.value}}customElements.get("basic-calendar")||customElements.define("basic-calendar",e),customElements.get("single-calendar")||customElements.define("single-calendar",class extends e{constructor(){super()}calc(t,e){const{length:a}=e,n=Math.floor(a*(t.getDate()/this.lastDay(t)));Math.floor(a*this.diff);return{left:n}}async render(){this.currentDate=this.data;const t=this.calc(this.date,this.bar)[this.dir];this.setProgressBar(this.bar,t,"#FB9B2B"),this.$.firstElementChild.classList.toggle(this.dir),this.$.querySelector(".value").textContent=this.value,this.$.querySelector(".value").style="float: right",this.$.querySelector(".left svg").style="transform: scaleX(-1)"}})}(),t("students__diagram-info__value_bachelors",e(u.groups.bachelors)),t("students__diagram-info__value_specialists",e(u.groups.specialists)),t("students__diagram-info__value_magisters",e(u.groups.magisters))});